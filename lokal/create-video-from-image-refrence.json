"{\n  \"name\": \"Generate video with image refrence\",\n  \"nodes\": [\n    {\n      \"parameters\": {\n        \"method\": \"PUT\",\n        \"url\": \"=https://wa.devotetolove.com/send/{{ $('When Executed by Another Workflow').item.json.chat_id }}\",\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"Bearer SAVnDRPmruAduGveHmt7EKMYB65ZF7n2\"\n            }\n          ]\n        },\n        \"sendBody\": true,\n        \"contentType\": \"multipart-form-data\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"phone\",\n              \"value\": \"={{ $('When Executed by Another Workflow').item.json.send_id }}\"\n            },\n            {\n              \"name\": \"message\",\n              \"value\": \"={{ $('When Executed by Another Workflow').item.json.prompt }}\\n\\nhttps://s3proxy.talentabangsa.com/ai_agent/{{ $('When Executed by Another Workflow').item.json.fileName }}\"\n            },\n            {\n              \"parameterType\": \"formBinaryData\",\n              \"name\": \"video\",\n              \"inputDataFieldName\": \"data\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"id\": \"223773f6-04c3-4cd6-989e-a43fb077086e\",\n      \"name\": \"Send video\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"typeVersion\": 4.2,\n      \"position\": [\n        1632,\n        320\n      ],\n      \"executeOnce\": true,\n      \"onError\": \"continueRegularOutput\"\n    },\n    {\n      \"parameters\": {\n        \"method\": \"POST\",\n        \"url\": \"https://generativelanguage.googleapis.com/v1beta/models/veo-3.1-generate-preview:predictLongRunning\",\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"x-goog-api-key\",\n              \"value\": \"=AIzaSyBsP5OMaSFMYyD4DKTlhkh4yIB3h4pvtYI\"\n            },\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/json\"\n            }\n          ]\n        },\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"jsonBody\": \"={{ (() => {\\n  const p    = $json.prompt;\\n  const ar   = String($json.aspectRatio || '16:9').replace(/\\\\s+/g, '');\\n  const b64  = $node['Extract from File'].json.data;\\n  const mime = 'image/webp';\\n\\n  return {\\n    instances: [\\n      {\\n        prompt: p,\\n        image: {\\n          bytesBase64Encoded: b64,\\n          mimeType: mime\\n        }\\n      }\\n    ],\\n    parameters: {\\n      aspectRatio: ar\\n    }\\n  };\\n})() }}\",\n        \"options\": {}\n      },\n      \"id\": \"e10f9519-3f55-4b54-aedf-1c0db2c88960\",\n      \"name\": \"Gemini Veo3.1 Generate (LRO)\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"typeVersion\": 4.2,\n      \"position\": [\n        672,\n        336\n      ]\n    },\n    {\n      \"parameters\": {\n        \"url\": \"={{ $json.imageUrl }}\",\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"typeVersion\": 4.2,\n      \"position\": [\n        224,\n        336\n      ],\n      \"id\": \"ed552313-181c-43df-92d8-74e73362bea2\",\n      \"name\": \"HTTP Request\"\n    },\n    {\n      \"parameters\": {\n        \"operation\": \"binaryToPropery\",\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"typeVersion\": 1,\n      \"position\": [\n        432,\n        336\n      ],\n      \"id\": \"abf38510-d71e-4219-bf6e-231ab6ed6782\",\n      \"name\": \"Extract from File\"\n    },\n    {\n      \"parameters\": {\n        \"url\": \"=https://generativelanguage.googleapis.com/v1beta/{{ $json.name }}\",\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"x-goog-api-key\",\n              \"value\": \"AIzaSyBsP5OMaSFMYyD4DKTlhkh4yIB3h4pvtYI\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"typeVersion\": 4.2,\n      \"position\": [\n        1168,\n        336\n      ],\n      \"id\": \"13f3aa86-ef93-4b3b-a03f-ea1bbca449ce\",\n      \"name\": \"Get status\"\n    },\n    {\n      \"parameters\": {\n        \"url\": \"={{ $json.response.generateVideoResponse.generatedSamples[0].video.uri }}\",\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"x-goog-api-key\",\n              \"value\": \"AIzaSyBsP5OMaSFMYyD4DKTlhkh4yIB3h4pvtYI\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"typeVersion\": 4.2,\n      \"position\": [\n        1360,\n        336\n      ],\n      \"id\": \"aa8db98b-ea2b-4a55-afc2-f0df6ee95dac\",\n      \"name\": \"Download video\",\n      \"onError\": \"continueErrorOutput\"\n    },\n    {\n      \"parameters\": {\n        \"workflowInputs\": {\n          \"values\": [\n            {\n              \"name\": \"prompt\"\n            },\n            {\n              \"name\": \"imageUrl\"\n            },\n            {\n              \"name\": \"chat_id\"\n            },\n            {\n              \"name\": \"send_id\"\n            },\n            {\n              \"name\": \"fileName\"\n            }\n          ]\n        }\n      },\n      \"type\": \"n8n-nodes-base.executeWorkflowTrigger\",\n      \"typeVersion\": 1.1,\n      \"position\": [\n        0,\n        336\n      ],\n      \"id\": \"9bcaf70a-b710-4b26-870a-a6286727934b\",\n      \"name\": \"When Executed by Another Workflow\"\n    },\n    {\n      \"parameters\": {},\n      \"type\": \"n8n-nodes-base.wait\",\n      \"typeVersion\": 1.1,\n      \"position\": [\n        880,\n        336\n      ],\n      \"id\": \"d4996756-0f92-4161-ac50-ae3fce2c28ae\",\n      \"name\": \"Wait\",\n      \"webhookId\": \"af0d5817-c989-442a-ab86-ec69d67c7995\"\n    }\n  ],\n  \"pinData\": {\n    \"When Executed by Another Workflow\": [\n      {\n        \"json\": {\n          \"prompt\": \"Buatkan saya video dengan wanita asia cantik dengan memegang botol parfum 30ml aoraki MORNING RITUAL EXTRAIT DE PARFUM seperti digambar\",\n          \"imageUrl\": \"https://storage.googleapis.com/n8n-devotetolove/wa/acosedoyuqebalurewoh.jpg?alt=media\",\n          \"chat_id\": \"6281336460250\",\n          \"send_id\": \"6283837020220\",\n          \"fileName\": \"parfume aoraki\"\n        }\n      }\n    ]\n  },\n  \"connections\": {\n    \"HTTP Request\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract from File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract from File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Gemini Veo3.1 Generate (LRO)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Gemini Veo3.1 Generate (LRO)\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get status\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download video\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download video\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send video\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Wait\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When Executed by Another Workflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTTP Request\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Wait\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"active\": false,\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"54874f5c-5ca2-4977-997b-d535ba7bcca9\",\n  \"meta\": {\n    \"templateCredsSetupCompleted\": true,\n    \"instanceId\": \"038f07380823737bad6c4701f91c0908c21107fc6ca87179339ab49a21465b4a\"\n  },\n  \"id\": \"EeIGJ19irQigEKGa\",\n  \"tags\": []\n}"
