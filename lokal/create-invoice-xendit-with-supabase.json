"{\n  \"name\": \"Topup Balance\",\n  \"nodes\": [\n    {\n      \"parameters\": {\n        \"httpMethod\": \"POST\",\n        \"path\": \"topup-balance\",\n        \"authentication\": \"jwtAuth\",\n        \"responseMode\": \"responseNode\",\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"typeVersion\": 2,\n      \"position\": [\n        0,\n        0\n      ],\n      \"id\": \"0e3edbc9-3c3d-4a88-8856-7520ec4ae769\",\n      \"name\": \"Webhook\",\n      \"webhookId\": \"6dca19a4-b809-46ec-a11a-381ebe0c66eb\",\n      \"credentials\": {\n        \"jwtAuth\": {\n          \"id\": \"1Cokr8tb9Wyy1p1y\",\n          \"name\": \"JWT Auth account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"tableId\": \"payments\",\n        \"fieldsUi\": {\n          \"fieldValues\": [\n            {\n              \"fieldId\": \"user_id\",\n              \"fieldValue\": \"={{ $json.jwtPayload.sub }}\"\n            },\n            {\n              \"fieldId\": \"amount\",\n              \"fieldValue\": \"={{ $json.body.amount }}\"\n            },\n            {\n              \"fieldId\": \"status\",\n              \"fieldValue\": \"pending\"\n            }\n          ]\n        }\n      },\n      \"type\": \"n8n-nodes-base.supabase\",\n      \"typeVersion\": 1,\n      \"position\": [\n        280,\n        0\n      ],\n      \"id\": \"ba4f3f87-7a2c-4aa2-a01f-0a0a922839fc\",\n      \"name\": \"Insert to Table Payment\",\n      \"credentials\": {\n        \"supabaseApi\": {\n          \"id\": \"MqSrBhq5FpX3BF3U\",\n          \"name\": \"Supabase account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"method\": \"POST\",\n        \"url\": \"https://api.xendit.co/v2/invoices\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpBasicAuth\",\n        \"sendBody\": true,\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"external_id\",\n              \"value\": \"={{ $json.id }}\"\n            },\n            {\n              \"name\": \"amount\",\n              \"value\": \"={{ $json.amount }}\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"typeVersion\": 4.2,\n      \"position\": [\n        500,\n        0\n      ],\n      \"id\": \"0a88fc6c-19fa-483d-8816-9ba54cc3a521\",\n      \"name\": \"Get Invoice URL Xendit\",\n      \"credentials\": {\n        \"httpBasicAuth\": {\n          \"id\": \"VhdXCKNjMALpLDLx\",\n          \"name\": \"Unnamed credential\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"operation\": \"update\",\n        \"tableId\": \"payments\",\n        \"filters\": {\n          \"conditions\": [\n            {\n              \"keyName\": \"id\",\n              \"condition\": \"eq\",\n              \"keyValue\": \"={{ $('Insert to Table Payment').item.json.id }}\"\n            }\n          ]\n        },\n        \"fieldsUi\": {\n          \"fieldValues\": [\n            {\n              \"fieldId\": \"external_id\",\n              \"fieldValue\": \"={{ $json.external_id }}\"\n            },\n            {\n              \"fieldId\": \"invoice_url\",\n              \"fieldValue\": \"={{ $json.invoice_url }}\"\n            }\n          ]\n        }\n      },\n      \"type\": \"n8n-nodes-base.supabase\",\n      \"typeVersion\": 1,\n      \"position\": [\n        800,\n        0\n      ],\n      \"id\": \"2f2336dd-6445-4eca-8a3e-196d08f4c23b\",\n      \"name\": \"Update Payment with Invoice URL\",\n      \"credentials\": {\n        \"supabaseApi\": {\n          \"id\": \"MqSrBhq5FpX3BF3U\",\n          \"name\": \"Supabase account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"respondWith\": \"json\",\n        \"responseBody\": \"={\\n  \\\"invoice_url\\\": \\\"{{ $json.invoice_url }}\\\"\\n}\",\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"typeVersion\": 1.4,\n      \"position\": [\n        1060,\n        0\n      ],\n      \"id\": \"5db9d60a-9464-41bd-aaad-bce87381e73c\",\n      \"name\": \"Respond to Webhook with Invoice URL\"\n    }\n  ],\n  \"pinData\": {\n    \"Webhook\": [\n      {\n        \"json\": {\n          \"headers\": {\n            \"host\": \"n8n-patuaecdsfbr.pempek.sumopod.my.id\",\n            \"user-agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36\",\n            \"content-length\": \"16\",\n            \"accept\": \"*/*\",\n            \"accept-encoding\": \"gzip, br\",\n            \"accept-language\": \"en-US,en;q=0.8\",\n            \"authorization\": \"Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6Ik1EdHg5ZnJSNjkwS0xJVlAiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2Nkd2lrempqc2JscnZocGJkcXN4LnN1cGFiYXNlLmNvL2F1dGgvdjEiLCJzdWIiOiIzOGJkNTMyZi1iMGZkLTQxMTktOGY1My0xNjA4MWQwN2U2YzUiLCJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNzU0MDY1NTM3LCJpYXQiOjE3NTQwNjE5MzcsImVtYWlsIjoiMDdhcmlhc2V0YUBnbWFpbC5jb20iLCJwaG9uZSI6IiIsImFwcF9tZXRhZGF0YSI6eyJwcm92aWRlciI6ImVtYWlsIiwicHJvdmlkZXJzIjpbImVtYWlsIl19LCJ1c2VyX21ldGFkYXRhIjp7ImVtYWlsIjoiMDdhcmlhc2V0YUBnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicGhvbmVfdmVyaWZpZWQiOmZhbHNlLCJzdWIiOiIzOGJkNTMyZi1iMGZkLTQxMTktOGY1My0xNjA4MWQwN2U2YzUifSwicm9sZSI6ImF1dGhlbnRpY2F0ZWQiLCJhYWwiOiJhYWwxIiwiYW1yIjpbeyJtZXRob2QiOiJvdHAiLCJ0aW1lc3RhbXAiOjE3NTQwNjE5Mzd9XSwic2Vzc2lvbl9pZCI6ImI0ZmU3NmFhLTFiNTEtNGJlOC1hNzUyLTQ1YTVjNDVkNDA0ZCIsImlzX2Fub255bW91cyI6ZmFsc2V9.3qUFXZpxRixjroYxMtMCQtqXHXY6iXbCKiEPJf9nyxE\",\n            \"cdn-loop\": \"cloudflare; loops=1\",\n            \"cf-connecting-ip\": \"103.105.55.20\",\n            \"cf-ipcountry\": \"ID\",\n            \"cf-ray\": \"968659fd09a49af4-SIN\",\n            \"cf-visitor\": \"{\\\"scheme\\\":\\\"https\\\"}\",\n            \"content-type\": \"application/json\",\n            \"origin\": \"http://localhost:5173\",\n            \"priority\": \"u=1, i\",\n            \"referer\": \"http://localhost:5173/\",\n            \"sec-ch-ua\": \"\\\"Not)A;Brand\\\";v=\\\"8\\\", \\\"Chromium\\\";v=\\\"138\\\", \\\"Brave\\\";v=\\\"138\\\"\",\n            \"sec-ch-ua-mobile\": \"?0\",\n            \"sec-ch-ua-platform\": \"\\\"macOS\\\"\",\n            \"sec-fetch-dest\": \"empty\",\n            \"sec-fetch-mode\": \"cors\",\n            \"sec-fetch-site\": \"cross-site\",\n            \"sec-gpc\": \"1\",\n            \"x-forwarded-for\": \"103.105.55.20, 104.23.175.151\",\n            \"x-forwarded-host\": \"n8n-patuaecdsfbr.pempek.sumopod.my.id\",\n            \"x-forwarded-port\": \"443\",\n            \"x-forwarded-proto\": \"https\",\n            \"x-forwarded-server\": \"c65e959e7398\",\n            \"x-real-ip\": \"104.23.175.151\"\n          },\n          \"params\": {},\n          \"query\": {},\n          \"body\": {\n            \"amount\": 50000\n          },\n          \"webhookUrl\": \"https://n8n-patuaecdsfbr.pempek.sumopod.my.id/webhook/topup-balance\",\n          \"executionMode\": \"production\",\n          \"jwtPayload\": {\n            \"iss\": \"https://cdwikzjjsblrvhpbdqsx.supabase.co/auth/v1\",\n            \"sub\": \"38bd532f-b0fd-4119-8f53-16081d07e6c5\",\n            \"aud\": \"authenticated\",\n            \"exp\": 1754065537,\n            \"iat\": 1754061937,\n            \"email\": \"07ariaseta@gmail.com\",\n            \"phone\": \"\",\n            \"app_metadata\": {\n              \"provider\": \"email\",\n              \"providers\": [\n                \"email\"\n              ]\n            },\n            \"user_metadata\": {\n              \"email\": \"07ariaseta@gmail.com\",\n              \"email_verified\": true,\n              \"phone_verified\": false,\n              \"sub\": \"38bd532f-b0fd-4119-8f53-16081d07e6c5\"\n            },\n            \"role\": \"authenticated\",\n            \"aal\": \"aal1\",\n            \"amr\": [\n              {\n                \"method\": \"otp\",\n                \"timestamp\": 1754061937\n              }\n            ],\n            \"session_id\": \"b4fe76aa-1b51-4be8-a752-45a5c45d404d\",\n            \"is_anonymous\": false\n          }\n        }\n      }\n    ]\n  },\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Insert to Table Payment\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Insert to Table Payment\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Invoice URL Xendit\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Invoice URL Xendit\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Payment with Invoice URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update Payment with Invoice URL\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Respond to Webhook with Invoice URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"active\": true,\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"fc9f9474-0570-4271-a606-a5e4ecd41775\",\n  \"meta\": {\n    \"templateCredsSetupCompleted\": true,\n    \"instanceId\": \"8bd62d28c35c0b4ad404d6d3f48d48f7160cc529a80ebb7193cecc134eb339d7\"\n  },\n  \"id\": \"Kxi5irGD3sIrFBab\",\n  \"tags\": []\n}"
