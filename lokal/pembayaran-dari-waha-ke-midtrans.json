"{\n  \"name\": \"Pembayaran MidTrans\",\n  \"nodes\": [\n    {\n      \"parameters\": {\n        \"functionCode\": \"const nama = $json.payload.body.replace(/bayar invoice/i, '').trim(); return [{ json: { nama } }];\"\n      },\n      \"name\": \"Extract Nama\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"typeVersion\": 1,\n      \"position\": [\n        240,\n        -60\n      ],\n      \"id\": \"1cafad1b-11e9-4afb-baf9-d855653e3d92\"\n    },\n    {\n      \"parameters\": {\n        \"orderId\": \"={{ $json.invoice_id }}\",\n        \"grossAmount\": \"={{ $json.nominal }}\",\n        \"additionalFields\": {},\n        \"requestOptions\": {}\n      },\n      \"type\": \"@yudhaputrama/n8n-nodes-midtrans.midtransSnap\",\n      \"typeVersion\": 1,\n      \"position\": [\n        920,\n        -60\n      ],\n      \"id\": \"b9448c69-b153-434e-8b1d-1bc254837748\",\n      \"name\": \"Midtrans SNAP\",\n      \"credentials\": {\n        \"midtransApi\": {\n          \"id\": \"BRz4PZ41gBg0mwjO\",\n          \"name\": \"Midtrans account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"documentId\": {\n          \"__rl\": true,\n          \"value\": \"1U6Sj-sbJ_3OC5XbRqi-zQJpu2GaoHY3epkmtcSNwFXE\",\n          \"mode\": \"list\",\n          \"cachedResultName\": \"Data Tagihan\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1U6Sj-sbJ_3OC5XbRqi-zQJpu2GaoHY3epkmtcSNwFXE/edit?usp=drivesdk\"\n        },\n        \"sheetName\": {\n          \"__rl\": true,\n          \"value\": \"gid=0\",\n          \"mode\": \"list\",\n          \"cachedResultName\": \"Sheet1\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1U6Sj-sbJ_3OC5XbRqi-zQJpu2GaoHY3epkmtcSNwFXE/edit#gid=0\"\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"typeVersion\": 4.6,\n      \"position\": [\n        480,\n        -60\n      ],\n      \"id\": \"a3639406-b485-446b-b71b-6eb938528d94\",\n      \"name\": \"Google Sheets\",\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"uvSC9l5cU9mYporG\",\n          \"name\": \"Google Sheets account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {},\n      \"type\": \"@devlikeapro/n8n-nodes-waha.wahaTrigger\",\n      \"typeVersion\": 202502,\n      \"position\": [\n        -100,\n        -160\n      ],\n      \"id\": \"64e1333c-5df7-4561-9bb6-f7c759cf27cd\",\n      \"name\": \"WAHA Trigger\",\n      \"webhookId\": \"c0d5c52d-df17-4923-a52f-c8cd110e1302\"\n    },\n    {\n      \"parameters\": {\n        \"resource\": \"Chatting\",\n        \"operation\": \"Send Text\",\n        \"session\": \"={{ $('Filter berdasarkan Nama').item.json.session_waha }}\",\n        \"chatId\": \"={{ $('Filter berdasarkan Nama').item.json.no_wa }}\",\n        \"reply_to\": \"={{ $('Filter berdasarkan Nama').item.json.no_wa }}\",\n        \"text\": \"=üëã Hai kak {{ $('Filter berdasarkan Nama').item.json.nama_pelanggan }},\\n\\nTagihan anda adalah :\\n\\n‚û°Ô∏è No.Invoice : {{ $('Filter berdasarkan Nama').item.json.invoice_id }}\\n‚û°Ô∏è Atas Nama : {{ $('Filter berdasarkan Nama').item.json.nama_pelanggan }}\\n‚û°Ô∏è Jumlah Tagihan : Rp.{{ $('Filter berdasarkan Nama').item.json.nominal }}\\nUntuk melakukan pembayaran silahkan klik link dibawah ini :\\n\\n{{ $json.redirect_url }}\",\n        \"requestOptions\": {}\n      },\n      \"type\": \"@devlikeapro/n8n-nodes-waha.WAHA\",\n      \"typeVersion\": 202502,\n      \"position\": [\n        1180,\n        -60\n      ],\n      \"id\": \"65fbda33-3ed7-4c76-bfbb-b1a98a9f2d7f\",\n      \"name\": \"WAHA\",\n      \"credentials\": {\n        \"wahaApi\": {\n          \"id\": \"8GeXL3pNXmstzB8v\",\n          \"name\": \"WAHA ASRATECH\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"jsCode\": \"\\nconst namaTarget = $input.first().json.Nama.toLowerCase();\\nlet found = null;\\n\\nfor (const item of items) {\\n  const row = item.json;\\n  if (row[\\\"Nama\\\"] && row[\\\"Nama\\\"].toLowerCase() === namaTarget) {\\n    found = row;\\n    break;\\n  }\\n}\\n\\nif (!found) {\\n  throw new Error(`Data untuk nama \\\"${namaTarget}\\\" tidak ditemukan.`);\\n}\\n\\n// Format untuk Midtrans\\nreturn [{\\n  json: {\\n    invoice_id: found[\\\"No.Invoice\\\"],\\n    nama_pelanggan: found[\\\"Nama\\\"],\\n    nominal: found[\\\"Nominal\\\"],\\n    no_wa: $('WAHA Trigger').first().json.payload.from,\\n    session_waha:$('WAHA Trigger').first().json.session\\n  }\\n}];\\n\"\n      },\n      \"type\": \"n8n-nodes-base.code\",\n      \"typeVersion\": 2,\n      \"position\": [\n        700,\n        -60\n      ],\n      \"id\": \"df5a96e8-6f38-4e85-9407-dd850c7759b5\",\n      \"name\": \"Filter berdasarkan Nama\"\n    },\n    {\n      \"parameters\": {\n        \"content\": \"## Install Node Midtrans SNAP\\n**Klik ‚û°Ô∏è. [N8N Node Midtrans](https://www.npmjs.com/package/@yudhaputrama/n8n-nodes-midtrans?activeTab=code)\",\n        \"height\": 100,\n        \"width\": 580,\n        \"color\": 3\n      },\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"typeVersion\": 1,\n      \"position\": [\n        180,\n        -220\n      ],\n      \"id\": \"dddf5244-9e7f-4aa0-9459-c306fc5f0ba4\",\n      \"name\": \"Sticky Note\"\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Extract Nama\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Sheets\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Midtrans SNAP\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"WAHA\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Sheets\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter berdasarkan Nama\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"WAHA Trigger\": {\n      \"main\": [\n        [],\n        [],\n        [],\n        [\n          {\n            \"node\": \"Extract Nama\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter berdasarkan Nama\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Midtrans SNAP\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"active\": false,\n  \"settings\": {\n    \"executionOrder\": \"v1\",\n    \"callerPolicy\": \"workflowsFromSameOwner\"\n  },\n  \"versionId\": \"3bce735c-9f3e-400c-87cd-6e76959dc668\",\n  \"meta\": {\n    \"templateCredsSetupCompleted\": true,\n    \"instanceId\": \"e33423954649047b6d8ec3eca03b75defdccf8b57603275e799d2b27382534ff\"\n  },\n  \"id\": \"SMZQCZcJMWyXmT1I\",\n  \"tags\": []\n}"
